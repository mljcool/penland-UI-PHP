{% comment %}
<documentation>
    <name>ProgramRegistration/FetchCourseSectionDetails</name>
    <version>1.0.0</version>
    <author>Microsoft Business Application Solutions</author>
    <module>Program Registration</module>
    <description>
        FetchXML to retrieve the course sections details of a particular program. Leveraged on Course Section Details page.
    </description>
    <comments>
        If this web template is modified, it may be overridden by the future upgrades.
        This web template should be included in whichever web page needed.
    </comments>
</documentation>
{% endcomment %}

{% fetchxml coursesectionFetch %}
<fetch version="1.0" output-format="xml-platform" mapping="logical" distinct="true">
  <entity name="mshied_coursesection">
    <attribute name="mshied_name" />
    <attribute name="mshied_suppliesandmaterials" />
    <attribute name="mshied_startdate" />
    <attribute name="mshied_enddate" />
    <attribute name="mshied_coursedaytime" />
    <attribute name="mshied_enrollmentrequirements" />
    <attribute name="mshied_location" />
    <attribute name="mshied_coursesectionstatus" />
    <attribute name="mshied_registrationenddate" />
    <attribute name="mshied_registrationstartdate" />
    <attribute name="mshied_adminapproval" />
    <attribute name="mshied_organization" />
    <attribute name="mshied_enrollmentlimit" />
    <attribute name="mshied_allowwaitlist" />
    <attribute name="mshied_academicperiodid" />
    <attribute name="mshied_courseid" />
    <attribute name="mshied_totalenrolled" />
    <attribute name="mshied_registrationenddateschooltimezone" />
    <attribute name="mshied_registrationstartdateschooltimezone" />
    <filter type="and">
      <condition attribute="mshied_coursesectionid" operator="eq" value="{{ coursesectionid }}" />
      <condition attribute="createdon" operator="ne" value="{{now}}" />
    </filter>
     <link-entity name="mshied_course" from="mshied_courseid" to="mshied_courseid" link-type="outer" alias="course">
      <attribute name="mshied_description" />
    </link-entity>
    <link-entity name="contact" from="contactid" to="mshied_instructorid" link-type="outer" alias="instructor">
      <attribute name="fullname" />
    </link-entity>
    <link-entity name="account" from="accountid" to="mshied_campusid" link-type="outer" alias="campus">
      <attribute name="mshied_timezone" />
    </link-entity>
    <link-entity name="mshied_coursesection_mshied_program" from="mshied_coursesectionid" to="mshied_coursesectionid" intersect="true">
      <link-entity name="mshied_program" from="mshied_programid" to="mshied_programid" intersect="true" alias="program">
        <attribute name="mshied_name" />
        <attribute name="mshied_programid" />
      </link-entity>
    </link-entity>
  </entity>
</fetch>
{% endfetchxml %}

{% if coursesectionFetch.results.entities.size > 0 %}
{% assign coursesection = coursesectionFetch.results.entities[0] %}
{% endif %}